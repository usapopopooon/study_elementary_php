<?php
/**
 * 05_loops.php - ループ処理
 *
 * for、while、foreach を使った繰り返し処理を学びます。
 */

// ============================================
// for文
// ============================================
// 決まった回数繰り返す場合に使います
// 構文: for (初期化; 条件; 更新) { 処理 }

echo "--- for文 ---\n";

// 1から5まで出力
for ($i = 1; $i <= 5; $i++) {
    echo "カウント: $i\n";
}
// 出力:
// カウント: 1
// カウント: 2
// カウント: 3
// カウント: 4
// カウント: 5

// 偶数だけ出力（2ずつ増やす）
echo "\n偶数のみ: ";
for ($i = 2; $i <= 10; $i += 2) {
    echo "$i ";
}
echo "\n";
// 出力: 偶数のみ: 2 4 6 8 10

// ============================================
// while文
// ============================================
// 条件がtrueの間、繰り返します
// 回数が決まっていない場合に便利です

echo "\n--- while文 ---\n";

$count = 1;
while ($count <= 5) {
    echo "while: $count\n";
    $count++; // これを忘れると無限ループになるので注意！
}
// 出力:
// while: 1
// while: 2
// while: 3
// while: 4
// while: 5

// ============================================
// do-while文
// ============================================
// 最低1回は実行され、その後条件をチェックします

echo "\n--- do-while文 ---\n";

$num = 1;
do {
    echo "do-while: $num\n";
    $num++;
} while ($num <= 3);
// 出力:
// do-while: 1
// do-while: 2
// do-while: 3

// 条件が最初からfalseでも1回は実行される
$x = 10;
do {
    echo "これは1回実行されます（x = $x）\n";
    // 出力: これは1回実行されます（x = 10）
} while ($x < 5);

// ============================================
// foreach文
// ============================================
// 配列の要素を順番に処理するのに最適です

echo "\n--- foreach文（値のみ）---\n";

$fruits = ["りんご", "バナナ", "オレンジ"];

foreach ($fruits as $fruit) {
    echo "果物: $fruit\n";
}
// 出力:
// 果物: りんご
// 果物: バナナ
// 果物: オレンジ

// インデックスも取得する場合
echo "\n--- foreach文（キーと値）---\n";

foreach ($fruits as $index => $fruit) {
    echo "[$index] $fruit\n";
}
// 出力:
// [0] りんご
// [1] バナナ
// [2] オレンジ

// ============================================
// break と continue
// ============================================

echo "\n--- break（ループを抜ける）---\n";

for ($i = 1; $i <= 10; $i++) {
    if ($i == 5) {
        echo "5で終了！\n";
        break; // ループを完全に抜ける
    }
    echo "$i ";
}
echo "\n";
// 出力: 1 2 3 4 5で終了！

echo "\n--- continue（次の繰り返しへ）---\n";

for ($i = 1; $i <= 5; $i++) {
    if ($i == 3) {
        continue; // 3をスキップして次へ
    }
    echo "$i ";
}
echo "\n(3がスキップされました)\n";
// 出力: 1 2 4 5
//       (3がスキップされました)

// ============================================
// ネストしたループ（九九の表）
// ============================================

echo "\n--- ネストしたループ（九九の表）---\n";

for ($i = 1; $i <= 5; $i++) {
    for ($j = 1; $j <= 5; $j++) {
        // printf で桁揃えして出力
        printf("%3d", $i * $j);
    }
    echo "\n";
}
// 出力:
//   1  2  3  4  5
//   2  4  6  8 10
//   3  6  9 12 15
//   4  8 12 16 20
//   5 10 15 20 25

// ============================================
// 実践例: 配列の合計と平均
// ============================================

echo "\n--- 実践例: 合計と平均 ---\n";

$scores = [85, 90, 78, 92, 88];
$total = 0;

foreach ($scores as $score) {
    $total += $score;
}

$average = $total / count($scores);

echo "点数: ";
print_r($scores);
// 出力: 点数: Array ( [0] => 85 [1] => 90 [2] => 78 [3] => 92 [4] => 88 )

echo "合計: $total\n";
// 出力: 合計: 433

echo "平均: $average\n";
// 出力: 平均: 86.6
